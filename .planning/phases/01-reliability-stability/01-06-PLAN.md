---
phase: 01-reliability-stability
plan: 06
type: execute
wave: 4
depends_on: [01-05]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Bill of Sale flow works end-to-end"
    - "Lead management captures and displays leads"
    - "Inventory CRUD operations work (add, edit, delete vehicles)"
    - "Login and admin access work correctly"
  artifacts: []
  key_links: []
---

<objective>
Human verification checkpoint for existing functionality after Store.tsx decomposition.

Purpose: STAB-03 decomposition is a major refactor. Before marking Phase 1 complete, a human must verify that existing features still work. This satisfies Success Criteria #4: "Existing functionality (Bill of Sale, lead management, inventory CRUD) continues working after refactor."

Output:
- Human confirmation that key flows work
- Any issues logged for immediate fix
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-reliability-stability/01-05-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Store.tsx decomposition complete:
- AuthContext.tsx: User state, login/logout
- VehicleContext.tsx: Vehicle CRUD, loading states
- Store.tsx: Leads, sync (reduced from 888 to ~200 lines)

ErrorModal infrastructure wired:
- ErrorProvider wraps app
- Errors display in modal instead of browser alert()
  </what-built>
  <how-to-verify>
**Start the dev server:** `npm run dev` in the project directory

**Test 1: Login Flow**
1. Navigate to /login
2. Enter admin credentials
3. Login should succeed and redirect to admin area
4. Expected: No errors, user state persists across page refresh

**Test 2: Inventory Loading**
1. Navigate to /inventory (public) or /admin/inventory (admin)
2. Expected: Vehicles load without infinite spinner
3. If no vehicles: "No Vehicles Found" message appears
4. If vehicles exist: Grid displays correctly

**Test 3: Vehicle CRUD (Admin only)**
1. Click "Add Vehicle" in admin inventory
2. Fill out form and submit
3. Expected: Vehicle appears in list, no browser alert()
4. Edit a vehicle - change price or description
5. Expected: Changes save, reflected in list
6. Delete a vehicle
7. Expected: Vehicle removed from list

**Test 4: Bill of Sale Flow**
1. View a vehicle detail page
2. Click "Generate Bill of Sale"
3. Fill out buyer information
4. Generate the PDF
5. Expected: PDF generates correctly with vehicle data

**Test 5: Lead Capture**
1. As non-admin, view a vehicle
2. Click "Contact" or "I'm Interested"
3. Fill out lead form
4. Expected: Lead saved, appears in admin dashboard

**Test 6: Error Display**
1. Simulate an error (e.g., disconnect network, try to save)
2. Expected: ErrorModal appears (not browser alert)
3. Modal has error code, message, and retry button (if retryable)
  </how-to-verify>
  <resume-signal>
Type one of:
- "approved" - All tests pass, Phase 1 complete
- "issues: [describe problems]" - Problems found, need fixes
  </resume-signal>
</task>

</tasks>

<verification>
Human confirmation that:
1. Login/logout works
2. Inventory displays correctly
3. Vehicle add/edit/delete works
4. Bill of Sale generates
5. Lead capture works
6. Errors show in modal not alert
</verification>

<success_criteria>
- Human types "approved" indicating all critical flows work
- OR issues are documented for immediate resolution
</success_criteria>

<output>
After completion, create `.planning/phases/01-reliability-stability/01-06-SUMMARY.md` with human verification results.
</output>
